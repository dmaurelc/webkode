---
import Layout from "../../layouts/Layout.astro";
import HeaderV4 from "../../components/HeaderV4.astro";
import Footer from "../../components/Footer.astro";
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
const sortedProjects = projects.sort((a, b) => a.data.order - b.data.order);
---

<Layout title="Proyectos | Webkode">
  <HeaderV4 />
  <main class="bg-black min-h-screen pt-32 pb-20 px-4 sm:px-8">
    <div class="max-w-9xl mx-auto">
      <header class="mb-20 md:mb-32">
        <h1
          class="text-6xl md:text-9xl font-bold tracking-tighter text-white uppercase mb-8"
        >
          Selected <span class="text-accent">Work</span>
        </h1>
        <p class="text-xl md:text-2xl text-brand-muted max-w-2xl font-light">
          Explorando la intersección entre diseño, tecnología y experiencia de
          usuario.
        </p>
      </header>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {
          sortedProjects.map((project) => (
            <a
              href={`/proyectos/${project.slug}`}
              class="group relative block aspect-video bg-brand-surface overflow-hidden border border-white/5 hover:border-accent/50 transition-colors"
            >
              <div class="absolute inset-0 overflow-hidden">
                <img
                  src={project.data.coverImage}
                  alt={project.data.title}
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0"
                />
                <div class="absolute inset-0 bg-linear-to-t from-black/90 via-black/20 to-transparent opacity-80" />
              </div>

              <div class="absolute bottom-0 left-0 w-full p-8 translate-y-4 group-hover:translate-y-0 transition-transform duration-500">
                <div class="flex items-center gap-2 mb-3 text-accent text-xs tracking-widest uppercase font-mono">
                  <span>0{project.data.order}</span>
                  <span class="w-8 h-px bg-accent/50" />
                  <span>{project.data.year}</span>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-2 leading-none tracking-tight">
                  {project.data.title}
                </h2>
                <p class="text-brand-muted text-sm line-clamp-2 md:opacity-0 md:group-hover:opacity-100 transition-opacity duration-500 delay-100">
                  {project.data.description}
                </p>
              </div>
            </a>
          ))
        }
      </div>
    </div>
  </main>
  <Footer />
</Layout>
